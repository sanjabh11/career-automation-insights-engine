# PBI-0002-T2 Implement `ChatCoachPanel` UI and React Hook

## Description
Create a React chat interface (`ChatCoachPanel.tsx`) that communicates with the `/ai-career-coach` edge function. The panel will maintain conversation history, perform optimistic UI updates, and cache context in localStorage.

## Status History
| Timestamp | Event | From | To | Details | User |
|-----------|-------|------|----|---------|------|
| 2025-08-07 | user_approves | Proposed | Agreed | Task created & approved. | User |

## Requirements
1. **Component**: `src/components/ChatCoachPanel.tsx`.
2. **Hook**: `useCareerCoach.ts` with SWR / React Query for data fetching.
3. **Message Model**: `{ id, role: 'user'|'assistant', content }`.
4. **Context Caching**: Store last N messages in `localStorage` keyed by user id.
5. **Optimistic UI**: Render user message instantly; show typing indicator until response.
6. **Error Handling**: Fallback UI with retry.
7. **Accessibility**: Keyboard navigation, ARIA roles.
8. **Unit Tests**: Jest + React Testing Library.

## Implementation Plan
1. Scaffold component + hook.
2. Implement POST to `/ai-career-coach`.
3. Add context cache util (`src/utils/chatCache.ts`).
4. Styling via shadcn/ui + Tailwind.
5. Tests for message flow and error state.

## Test Plan
- **Unit**: Render panel, send fake user message, mock fetch to return assistant message, expect UI update.
- **Integration**: Connect to staging edge fn.

## Verification
- Manual QA session (10+ exchanges <3s each).

## Files Modified / Added
- `src/components/ChatCoachPanel.tsx`
- `src/hooks/useCareerCoach.ts`
- `src/utils/chatCache.ts`
- tests
