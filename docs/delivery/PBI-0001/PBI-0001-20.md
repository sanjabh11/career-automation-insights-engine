# PBI-0001-20: Local Search History (Guest Mode)

Type: code
Status: InProgress

## Goal
Provide a localStorage-backed search history with the same shape as the DB-backed hook, and a unified hook that chooses local vs remote based on auth state.

## Files
- `src/hooks/useSearchHistoryLocal.ts` (new)
- `src/hooks/useSearchHistoryUnified.ts` (new)
- [reference] `src/hooks/useSearchHistory.ts`
- `src/components/SearchHistoryPanel.tsx` (wire to unified)
- `src/components/SearchInterface.tsx` (wire to unified)

## Changes
- Implement a local hook that stores `SearchHistoryItem[]` in localStorage and provides `addSearch()` and `clearHistory()`.
- Implement a unified hook that proxies to local or remote based on `useSession()` and exposes a consistent API.

## Test Plan
1. Guest mode: Local hook returns/search history persists in localStorage; add/clear work.
2. Auth mode: Unified hook delegates to remote `useSearchHistory()` and functions work as before.
3. Toggle between guest/auth and verify no runtime errors; unified hook type surface stays stable.

## Rollback Plan
Remove the new hooks.
