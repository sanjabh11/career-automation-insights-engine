# PBI-0001-4 Refactor Existing Edge Functions

## Description
Update all existing Supabase edge functions that call Gemini to use the new shared util and 2.5 Flash endpoint.

## Status History
| Timestamp | Event | From | To | Details | User |
|-----------|-------|------|----|---------|------|
| 2025-07-04T19:52:00+05:30 | Proposed | Agreed | InProgress | Refactor started | AI_Agent |

## Implementation Plan
- Move prompt-building logic to shared util if possible.
- Change endpoint to use `/v1beta/models/gemini-2.5-flash:generateContent`.
- Remove hardcoded API keys from function code (use env).

## Test Plan
- All LLM-powered features should continue to work.
- Logs should appear in `llm_logs` for each call.

## Files Modified
- All affected edge function `index.ts` files.
