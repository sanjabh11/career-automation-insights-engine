# PBI-0001-24: O*NET Auth â€“ Require Username/Password Only (No API Key Fallback)

Type: code
Status: InProgress

## Goal
Align O*NET usage with standardized Basic Auth. Remove ONET_API_KEY fallback from `analyze-occupation-tasks` and require `ONET_USERNAME`/`ONET_PASSWORD`.

## Files
- `supabase/functions/analyze-occupation-tasks/index.ts`

## Changes
- Remove `ONET_API_KEY` fallback logic.
- Throw a configuration error when `ONET_USERNAME`/`ONET_PASSWORD` are missing.
- Build the Basic Auth header strictly from username/password.

## Test Plan
1. With both `ONET_USERNAME` and `ONET_PASSWORD` set:
   - Request succeeds and reaches O*NET.
2. Without either env set:
   - Function returns 500 with clear error message about missing username/password.
3. Verify log lines show no branch referencing API key fallback.

## Rollback Plan
Revert the function file to the previous version.
