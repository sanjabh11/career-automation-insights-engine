# PBI-0001-19: Local-first Saved Analyses Wrapper

Type: code
Status: InProgress

## Goal
Provide a unified hook that prefers localStorage when the user is not authenticated (guest mode), with optional sync helpers to move data between local and remote after login.

## Files
- `src/hooks/useSavedAnalysesUnified.ts` (new)
- [reference] `src/hooks/useSavedAnalysesLocal.ts`
- [reference] `src/hooks/useSavedAnalyses.ts`
- `src/components/SavedAnalysesPanel.tsx` (wire to unified)

## Changes
- Create `useSavedAnalysesUnified()` that:
  - Uses `useSession()` to detect guest vs authenticated user.
  - Returns the local or remote hook API transparently.
  - Exposes `isGuest`, `syncLocalToRemote()`, and `syncRemoteToLocal()` utilities.

## Test Plan
1. Guest mode (no user):
   - `useSavedAnalysesUnified()` returns local-backed data and methods.
   - Saving/deleting analyses updates localStorage only.
2. Auth mode (with user):
   - `useSavedAnalysesUnified()` proxies to remote Supabase-backed hook.
   - `syncLocalToRemote()` migrates existing local items to remote.
3. No regressions: Existing hooks continue to function.

## Rollback Plan
Remove `useSavedAnalysesUnified.ts` and any imports.
