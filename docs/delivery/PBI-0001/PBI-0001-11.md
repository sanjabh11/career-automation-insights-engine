# 0001-11 T3: Externalize APO weights/multipliers to DB

## Description
Move APO category weights and factor multipliers to a database configuration so they can be calibrated without code changes.

## Status History
- 2025-08-12T14:22:10+05:30: user_approves (Proposed -> Agreed) by User
- 2025-08-12T14:22:10+05:30: start_work (Agreed -> InProgress) by AI_Agent

## Requirements
- New table `apo_config` storing JSON values for `weights` and `factor_multipliers`.
- Edge Function `calculate-apo` must read config at runtime with safe fallback to defaults.
- Backward compatibility if config is absent.

## Implementation Plan
- Migration: create table `apo_config` and insert default row matching current constants.
- Modify `calculate-apo/index.ts`:
  - Introduce defaults as `DEFAULT_CATEGORY_WEIGHTS`, `DEFAULT_FACTOR_MULTIPLIERS`.
  - Add `fetchApoConfig()` to load config via service role.
  - Use config in item APO computation and overall weighting (with existing tech-heavy adjustment).
- Telemetry: log the actual weights used.

## Test Plan
- Apply migration, verify table and default row exist.
- Call `calculate-apo` and confirm behavior matches previous results (within rounding) with defaults.
- Update DB values and verify output changes accordingly.

## Files Modified
- `supabase/migrations/<ts>_create_apo_config.sql`
- `supabase/functions/calculate-apo/index.ts`
