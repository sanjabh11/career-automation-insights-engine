# PBI-0005-T1 Add O*NET Descriptor & Crosswalk Tables + Seed Script

## Description
Extend the Supabase schema to include detailed O*NET descriptor families (Abilities, Skills, Work Activities, Work Context, Interests, etc.) and crosswalk tables (MOC, CIP, SOC, ESCO). Provide an ingestion script that loads the bulk O*NET ZIP files into these tables and ensures Row Level Security (RLS).

## Status History
| Timestamp | Event | From | To | Details | User |
|-----------|-------|------|----|---------|------|
| 2025-08-07 | user_approves | Proposed | Agreed | Task created & approved. | User |

## Requirements
1. **New Tables** (examples):
   - `onet_descriptors` (occupation_code, descriptor_type, name, level, importance, scale)
   - `onet_crosswalk_moc` (moc_code, occupation_code)
   - `onet_crosswalk_cip` (cip_code, occupation_code)
   - Additional crosswalk tables for SOC, ESCO, RAPIDS
2. **Security**: RLS enabled; public read access only where needed.
3. **Seed Script**: `scripts/ingest_onet_data.ts` using Supabase CLI + `COPY` commands.
4. **Indexes**: GIN / btree indexes on searchable columns.
5. **Unit Tests**: Validate row counts and basic joins in Supabase emulator.

## Implementation Plan
1. Design schema in a migration (`202508071805_onet_descriptors.sql`).
2. Write TypeScript ingestion script.
3. Document data source licensing & attribution.
4. Add GitHub Action to refresh data monthly.

## Test Plan
- **Unit**: Validate table creation and row insertion counts.
- **Integration**: Run ingest script in staging; verify descriptor queries.

## Verification
- Successful ingestion of latest O*NET data; sample query returns expected descriptors.

## Files Added
- `supabase/migrations/202508071805_onet_descriptors.sql`
- `scripts/ingest_onet_data.ts`
- CI workflow update
